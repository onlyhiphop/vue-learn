<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <!-- 
        Es5之前因为if和for都没有块级作用域的概念，所以在很多时候，我们必须借助于function的作用域来解决应用外变量的问题

        Es6中，加入了let，let它是有if和for的块级作用域的
     -->
    <hr>
    <button>按钮1</button>
    <button>按钮2</button>
    <button>按钮3</button>
    <button>按钮4</button>
    <button>按钮5</button>


</body>
<script>
    //变量作用域
    {  //var变量没有块级作用域
        var name = "xaioming"
        console.log(name);
    }
    console.log(name); //也可以使用

    //没有块级作用域会引起问题
    //以下要实现点击第几个按钮，就显示第几个按钮被点击
   var btns = document.getElementsByTagName('button');
//    for (var i = 0; i < btns.length; i++){
//         btns[i].addEventListener('click', function(){
//             // 由于没有块级作用域 i的值相当于全局，被其他改掉了
//             console.log('第' + i + '个按钮被点击');   //点击按钮i一直是5
//         })
//    }

   //我们用闭包去实现块级作用域
   for (var i = 0; i < btns.length; i++){
       //使用闭包 来实现块级的作用域 （立即执行函数）
        (function(i){  //利用函数是一个作用域
            btns[i].addEventListener('click', function(){
                console.log('第' + i + '个按钮被点击'); 
            })
        })(i)
   }

//    使用es6中的let来声明变量
   const btns2 = document.getElementsByTagName('button')
   for(let i = 0; i < btns2.length; i++){  //使用了let之后，for就有了自己的作用域了
    btns[i].addEventListener('click', function(){
        console.log('第' + i + '个按钮被点击'); 
    })
   }
</script>
</html>